{"version":3,"sources":["create.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.js","sourcesContent":["/**\n * Created by zqq on 11/25/15.\n */\n$(function(){\n    var editor=editormd(\"editormd\",{\n        height:500,\n        path:\"/editor/lib/\",\n        emoji:true,\n        dialogLockScreen:true,\n        dialogShowMask:true,\n        dialogDraggable:false,\n        dialogMaskOpacity:.7,\n        dialogMaskBgColor:\"#000\",\n        imageUpload:true,\n        imageFormats:[\"jpg\",\"jpeg\",\"gif\",\"png\",\"bmp\",\"webp\"],\n        imageUploadURL:'url'\n    });\n\n\n    var articleForm={\n        $articleTitle:$(\"#articleTitle\"),\n        $mainClassify:$(\"#articleMainClassify\"),\n        $subClassify:$(\"#articleSubClassify\"),\n        $submitButton:$(\"#submit\"),\n        mainClassifyChange:function(){\n            var mainValue=$(this).val();\n\n            if(mainValue==0){\n                articleForm.subClassifyInit();\n            }else{\n                articleForm.subClassifyGetList(mainValue);\n                articleForm.$subClassify.parent().show();\n            }\n        },\n        subClassifyGetList:function(mainValue){\n            if($.isNumeric(mainValue)){\n                $.ajax({\n                    url:\"/admin/article/ajaxClassifyList\",\n                    type:\"post\",\n                    data:{\n                        mainId:mainValue,\n                        _token:$(\"input[name='_token']\").val()\n                    },\n                    success:function(data){\n                        var data=JSON.parse(data),subClassifyList;\n                        console.log(data);\n                        for(var i in data){\n                            subClassifyList+=\"<option values=\"+i+\">\"+data[i]+\"</option>\";\n                        }\n                        articleForm.$subClassify.empty().append(subClassifyList);\n                    }\n                })\n            }\n        },\n        mainClassifyInit:function(){\n            this.$mainClassify.prepend('<option value=\"\">主分类</option>').val(0), this.$mainClassify.change(this.mainClassifyChange)\n        },\n        subClassifyInit:function(){\n            this.$subClassify.empty().parent().hide()\n        },\n        submitFunc:function(i){\n            this.validClassify.call(this), i.call(this)\n        },\n        validClassify:function(){\n            if(!(this.$mainClassify.val() || this.$subClassify.val())){\n                return false;\n            }\n        },\n        init:function(){\n            this.mainClassifyInit(),\n            this.subClassifyInit(),\n            this.$submitButton.click(function(){\n                articleForm.validClassify(),\n                $.ajax({\n                    url:\"/index.php?r=admin/article/publish-post\",\n                    type:\"post\",\n                    data:{\n                        \"articleTitle\":articleForm.$articleTitle.val(),\n                        \"articleContent\":editor.getMarkdown(),\n                        \"articleMainClassify\":articleForm.$mainClassify.val(),\n                        \"articleSubClassify\":articleForm.$subClassify.val()\n                    },\n                    success:function(){\n\n                    }\n                });\n            })\n        }\n    };\n    articleForm.init()\n\n    //图片\n\n\n    $(document).on('change', '.btn-file :file', function() {\n        var input = $(this),\n            numFiles = input.get(0).files ? input.get(0).files.length : 1,\n            label = input.val().replace(/\\\\/g, '/').replace(/.*\\//, '');\n        input.trigger('fileselect', [numFiles, label]);\n    });\n\n    $(document).ready( function() {\n        $('.btn-file :file').on('fileselect', function(event, numFiles, label) {\n            console.log(numFiles);\n            console.log(label);\n        });\n    });\n\n\n});"],"sourceRoot":"/source/"}