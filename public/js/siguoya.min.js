!function(e,t){t(function(){!function(){if(e.$document=t(document),e.$window=t(e),e.yfx=function(){console.log(arg)},t.ajaxSetup({headers:{"X-CSRF-TOKEN":t('meta[name="csrf-token"]').attr("content")}}),location.href.indexOf("admin")<0&&location.href.indexOf("localhost")<0&&location.href.indexOf("firstdomain")){var a=document.createElement("script");a.src="//hm.baidu.com/hm.js?dbc825061da32f4cf32e3c7c56e95034";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i);var o=document.createElement("script");o.src="//push.zhanzhang.baidu.com/push.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)}}(),function(){function a(){t(l.get(r)).trigger("click"),r++,r>=n&&(r=0)}var i,o=t(".nav-tabs"),n=o.find("a").length,l=o.find("a"),r=1;i=setInterval(a,3e3),t(".tab-pane").hover(function(){clearInterval(i)},function(){i=setInterval(a,3e3)}),t(".redirectLessons").click(function(){e.location.href="https://www.jetbrains.com/phpstorm/"})}(),function(){t(e).width()<768&&t("#nav-pull-right").removeClass("pull-right")}(),function(){if(t("#editormd").length){var e=editormd("editormd",{height:500,path:"/vendor/editor/lib/",emoji:!0,dialogLockScreen:!0,dialogShowMask:!0,dialogDraggable:!1,dialogMaskOpacity:.7,dialogMaskBgColor:"#000",imageUpload:!0,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"/common/file/uploadFile"});t("#uploaderArea").length&&t("#uploaderArea").dmUploader({url:"/common/file/uploadFile",extraData:{_token:t("input[name='_token']").val(),filePlace:JSON.stringify({module:"Article",folderName:"articleCover"})},onUploadSuccess:function(e,t){var i=JSON.parse(t);a.$articleCover.val(t),a.$coverPreview.attr("src",i.file_url)}});var a={$articleTitle:t("#articleTitle"),$mainClassify:t("#articleMainClassify"),$subClassify:t("#articleSubClassify"),$articleCover:t("#articleCover"),$submitButton:t("#submit"),$coverPreview:t("#coverPreview"),$articleSummary:t("#articleSummary"),$articleOriginUrl:t("#articleOriginUrl"),mainClassifyChange:function(){var e=t(this).val();0==e?a.subClassifyInit():(a.subClassifyGetList(e),a.$subClassify.parent().show())},subClassifyGetList:function(e){t.isNumeric(e)&&t.ajax({url:"/admin/article/ajaxClassifyList",type:"post",data:{mainId:e,_token:t("input[name='_token']").val()},success:function(e){var t,e=JSON.parse(e);for(var i in e)t+="<option value="+i+">"+e[i]+"</option>";a.$subClassify.empty().append(t)}})},mainClassifyInit:function(){this.$mainClassify.prepend('<option value="">主分类</option>').val(0),this.$mainClassify.change(this.mainClassifyChange)},subClassifyInit:function(){this.$subClassify.empty().parent().hide()},submitFunc:function(e){this.validClassify.call(this),e.call(this)},validClassify:function(){return a.$articleTitle.val()&&a.$mainClassify.val()&&a.$subClassify.val()&&a.$articleSummary.val()&&e.getMarkdown()?!0:!1},init:function(){this.mainClassifyInit(),this.subClassifyInit(),this.$submitButton.click(function(){if(a.validClassify()){var i={_token:t("input[name='_token']").val(),article_title:a.$articleTitle.val(),article_main_classify:a.$mainClassify.val(),article_sub_classify:a.$subClassify.val(),article_cover:a.$articleCover.val(),article_summary:a.$articleSummary.val(),article_content:e.getMarkdown(),article_tags:t("#articleTags").val(),article_keywords:t("#articleKeywords").val(),article_origin_url:function(){return JSON.stringify(a.$articleOriginUrl.val().split(","))}};location.href.indexOf("edit")>0&&(i._method="patch",i.article_id=t("#legend").data().src),t.ajax({url:"/admin/article/store",type:"post",data:i,success:function(e){1==e&&(alert("成功"),location.href="/admin/article/create")}})}else alert("标题,分类,配图,内容都不得为空");return!1})}};a.init()}if(t("#mdContainer").length){editormd.markdownToHTML("markdown",{markdown:t("#mdContainer").val(),markdownSourceCode:!0});var i=t("#articleOriginSource");if(i.length)try{var o=JSON.parse(i.text());t("#articleOriginSource").text("作者:"+o[0]+"\r\n 原文链接:"+o[1]).attr("href",o[1])}catch(n){console.log("Bug:JSON字符串解析出错")}}}(),function(){e.global={$loading:t(".common_loading"),$modalTitle:t("#modalTitle"),$modalContent:t("#modalContent"),$modalCancelButton:t("#modalCancelButton"),$modalOkButton:t("#modalOkButton"),$dialogButton:t("#dialogButton"),$dialogClose:t("#modalClose"),dialogOpen:function(a,i){var o=t.extend({title:"标题",content:"内容",showOk:!1,showCancel:!1,okFunc:null,cancelFunc:null,redirectUrl:""},a);global.$modalTitle.html(o.title),global.$modalContent.html(o.content),o.showCancel?global.$modalCancelButton.show():!0,o.showOk?global.$modalOkButton.show():!0,o.okFunc&&(global.$modalOkButton.unbind("click"),global.$modalOkButton.click(function(){o.okFunc.call(i)})),global.$dialogButton.trigger("click"),o.redirectUrl&&setTimeout(function(){e.location.href=o.redirectUrl},2500)},dialogClose:function(e){var e=e?e:0;setTimeout(function(){global.$dialogClose.trigger("click")},e)},dialogDestroy:function(){global.dialogClose(),global.$modalCancelButton.unbind("click").hide(),global.$modalOkButton.unbind("click"),global.$modalOkButton.click(function(){global.dialogClose()})},isLogin:function(){return t.cookie("user_info")?!0:!1},userInfo:function(){if(!global.isLogin())return null;var e={},a=JSON.parse(t.cookie("user_info"));if(e.userId=a.user_id,e.userName=a.user_name,a.user_face){JSON.parse(a.user_face)}return e},codeCheckBootstrap:function(){var e=document.createElement("script");e.onload=function(){bootlint.showLintReportForCurrentDocument([])},document.body.appendChild(e)},loadingShow:function(e){e.find(".common_loading").length||global.$loading.clone().appendTo(e),e.find(".common_loading").show()},loadingHidden:function(e){e.find(".common_loading").hide()},loadingComplete:function(e){e.find(".common_loading").html('<div class="well">没有更多的数据了, o(︶︿︶)o</div>').show()},errorReport:function(e){global.dialogDestroy(),setTimeout(function(){global.dialogOpen({title:"错误提示",content:e+",请联系客服QQ:924714558",showCancel:!0})},1e3)}}}(),function(){if("/"==e.location.pathname){var a=!1,i=!1,o=10,n=10,l=!1,r=!1;t(e).scroll(function(){var s=t("#new_list"),c=t("#hot_list"),u=s.offset().top+s.outerHeight()-t(e).scrollTop(),d=c.offset().top+c.outerHeight()-t(e).scrollTop();t(e).height()-u>50&&(l||a||(t.ajax({url:"/home/index/ajaxarticlelist",type:"post",data:{start:o,type:"new",_token:t("body").data().token},success:function(e){e?(t("#append_new").append(e),o+=10,setTimeout(function(){a=!1},3e3)):l=!0}}),a=!0)),t(e).height()-d>50&&(r||i||(t.ajax({url:"/home/index/ajaxarticlelist",type:"post",data:{start:n,type:"hot",_token:t("body").data().token},success:function(e){e?(t("#append_hot").append(e),n+=10,setTimeout(function(){i=!1},3e3)):r=!0}}),i=!0))})}}(),function(){"/home/about/offer"==e.location.pathname&&(t("#main div:first-child").removeClass("container"),t("body").css({marginBottom:t(e).height()-t("#rate").height()+"px"}),t("#main").css({marginLeft:.25*t(e).width()}),t("#sidebar-ul a").click(function(){var e=t(this).attr("href");return t("html,body").animate({scrollTop:t(e).offset().top-55+"px"},500),t(this).addClass("active").parent().siblings().find("a").removeClass("active"),!1}))}(),function(){if(location.href.indexOf("/admin/series")>0){var e=t("#articleMainClassify"),a=t("#articleSubClassify");t("#uploaderArea").dmUploader({url:"/common/file/uploadFile",extraData:{_token:t("input[name='_token']").val(),filePlace:JSON.stringify({module:"Series",folderName:"seriesCover"})},onUploadSuccess:function(e,a){var i=JSON.parse(a);t("#seriesCover").val(a),t("#coverPreview").attr("src",i.file_url)}}),e.prepend('<option value="">主分类</option>').val(0),e.change(function(){var e=t(this).val();0==e?a.empty().parent().hide():(t.ajax({url:"/admin/article/ajaxClassifyList",type:"post",data:{mainId:e,_token:t("input[name='_token']").val()},success:function(e){var t,e=JSON.parse(e);for(var i in e)t+="<option value="+i+">"+e[i]+"</option>";a.empty().append(t)}}),a.parent().show())}),t("#submit").click(function(){var i={_token:t("input[name='_token']").val(),series_name:t("#seriesName").val(),series_cover:t("#seriesCover").val(),series_main_classify:e.val(),series_sub_classify:a.val()},o="/admin/series";return location.href.indexOf("edit")>0&&(i._method="patch",i.series_id=t("#legend").data().src,o=location.href.slice(0,-5)),t.ajax({url:o,type:"post",data:i,success:function(e){1==e&&alert("成功")}}),!1})}}()})}(window,jQuery);