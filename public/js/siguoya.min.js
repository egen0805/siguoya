!function(e,a){a(function(){!function(){if(e.$document=a(document),e.$window=a(e),e.yfx=function(){console.log(arg)},a.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}}),location.href.indexOf("admin")<0&&location.href.indexOf("localhost")<0&&location.href.indexOf("firstdomain")){var t=document.createElement("script");t.src="//hm.baidu.com/hm.js?dbc825061da32f4cf32e3c7c56e95034";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i);var o=document.createElement("script");o.src="//push.zhanzhang.baidu.com/push.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)}}(),function(){function t(){a(l.get(r)).trigger("click"),r++,r>=n&&(r=0)}var i,o=a(".nav-tabs"),n=o.find("a").length,l=o.find("a"),r=1;i=setInterval(t,3e3),a(".tab-pane").hover(function(){clearInterval(i)},function(){i=setInterval(t,3e3)}),a(".redirectLessons").click(function(){e.location.href="https://www.jetbrains.com/phpstorm/"})}(),function(){a(e).width()<768&&a("#nav-pull-right").removeClass("pull-right")}(),function(){if(a("#editormd").length){var e=editormd("editormd",{height:500,path:"/vendor/editor/lib/",emoji:!0,tex:!0,dialogLockScreen:!0,dialogShowMask:!0,dialogDraggable:!1,dialogMaskOpacity:.7,dialogMaskBgColor:"#000",imageUpload:!0,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"/common/file/uploadFile",tocm:!0});a("#uploaderArea").length&&a("#uploaderArea").dmUploader({url:"/common/file/uploadFile",extraData:{_token:a("input[name='_token']").val(),filePlace:JSON.stringify({module:"Article",folderName:"articleCover"})},onUploadSuccess:function(e,a){var i=JSON.parse(a);t.$articleCover.val(a),t.$coverPreview.attr("src",i.file_url)}});var t={$articleTitle:a("#articleTitle"),$mainClassify:a("#articleMainClassify"),$subClassify:a("#articleSubClassify"),$articleCover:a("#articleCover"),$submitButton:a("#submit"),$coverPreview:a("#coverPreview"),$articleSummary:a("#articleSummary"),$articleOriginUrl:a("#articleOriginUrl"),mainClassifyChange:function(){var e=a(this).val();0==e?t.subClassifyInit():(t.subClassifyGetList(e),t.$subClassify.parent().show())},subClassifyGetList:function(e){a.isNumeric(e)&&a.ajax({url:"/admin/article/ajaxClassifyList",type:"post",data:{mainId:e,_token:a("input[name='_token']").val()},success:function(e){var a,e=JSON.parse(e);for(var i in e)a+="<option value="+i+">"+e[i]+"</option>";t.$subClassify.empty().append(a)}})},mainClassifyInit:function(){this.$mainClassify.prepend('<option value="">主分类</option>').val(0),this.$mainClassify.change(this.mainClassifyChange)},subClassifyInit:function(){this.$subClassify.empty().parent().hide()},submitFunc:function(e){this.validClassify.call(this),e.call(this)},validClassify:function(){return t.$articleTitle.val()&&t.$mainClassify.val()&&t.$subClassify.val()&&t.$articleSummary.val()&&e.getMarkdown()?!0:!1},init:function(){this.mainClassifyInit(),this.subClassifyInit(),this.$submitButton.click(function(){if(t.validClassify()){var i={_token:a("input[name='_token']").val(),article_title:t.$articleTitle.val(),article_main_classify:t.$mainClassify.val(),article_sub_classify:t.$subClassify.val(),article_cover:t.$articleCover.val(),article_summary:t.$articleSummary.val(),article_content:e.getMarkdown(),article_tags:a("#articleTags").val(),article_keywords:a("#articleKeywords").val(),article_origin_url:function(){return JSON.stringify(t.$articleOriginUrl.val().split(","))}},o="/admin/article/store";location.href.indexOf("edit")>0&&(o="/admin/article/"+a("#legend").attr("data-src"),i._method="patch",i.article_id=a("#legend").data().src),a.ajax({url:o,type:"post",data:i,success:function(e){e&&(location.href="/admin/article")}})}else alert("标题,分类,配图,内容都不得为空");return!1})}};t.init()}if(a("#mdContainer").length){editormd.markdownToHTML("markdown",{markdown:a("#mdContainer").val(),markdownSourceCode:!0});var i=a("#articleOriginSource");if(i.length)try{var o=JSON.parse(i.text());a("#articleOriginSource").text("作者:"+o[0]+"\r\n 原文链接:"+o[1]).attr("href",o[1])}catch(n){console.log("Bug:JSON字符串解析出错")}}}(),function(){e.global={$loading:a(".common_loading"),$modalTitle:a("#modalTitle"),$modalContent:a("#modalContent"),$modalCancelButton:a("#modalCancelButton"),$modalOkButton:a("#modalOkButton"),$dialogButton:a("#dialogButton"),$dialogClose:a("#modalClose"),dialogOpen:function(t,i){var o=a.extend({title:"标题",content:"内容",showOk:!1,showCancel:!1,okFunc:null,cancelFunc:null,redirectUrl:""},t);global.$modalTitle.html(o.title),global.$modalContent.html(o.content),o.showCancel?global.$modalCancelButton.show():!0,o.showOk?global.$modalOkButton.show():!0,o.okFunc&&(global.$modalOkButton.unbind("click"),global.$modalOkButton.click(function(){o.okFunc.call(i)})),global.$dialogButton.trigger("click"),o.redirectUrl&&setTimeout(function(){e.location.href=o.redirectUrl},2500)},dialogClose:function(e){var e=e?e:0;setTimeout(function(){global.$dialogClose.trigger("click")},e)},dialogDestroy:function(){global.dialogClose(),global.$modalCancelButton.unbind("click").hide(),global.$modalOkButton.unbind("click"),global.$modalOkButton.click(function(){global.dialogClose()})},isLogin:function(){return a.cookie("user_info")?!0:!1},userInfo:function(){if(!global.isLogin())return null;var e={},t=JSON.parse(a.cookie("user_info"));if(e.userId=t.user_id,e.userName=t.user_name,t.user_face){JSON.parse(t.user_face)}return e},codeCheckBootstrap:function(){var e=document.createElement("script");e.onload=function(){bootlint.showLintReportForCurrentDocument([])},document.body.appendChild(e)},loadingShow:function(e){e.find(".common_loading").length||global.$loading.clone().appendTo(e),e.find(".common_loading").show()},loadingHidden:function(e){e.find(".common_loading").hide()},loadingComplete:function(e){e.find(".common_loading").html('<div class="well">没有更多的数据了, o(︶︿︶)o</div>').show()},errorReport:function(e){global.dialogDestroy(),setTimeout(function(){global.dialogOpen({title:"错误提示",content:e+",请联系客服QQ:924714558",showCancel:!0})},1e3)}}}(),function(){if("/"==e.location.pathname){var t=!1,i=!1,o=10,n=10,l=!1,r=!1;a(e).scroll(function(){var s=a("#new_list"),c=a("#hot_list"),d=s.offset().top+s.outerHeight()-a(e).scrollTop(),u=c.offset().top+c.outerHeight()-a(e).scrollTop();a(e).height()-d>50&&(l||t||(a.ajax({url:"/home/index/ajaxarticlelist",type:"post",data:{start:o,type:"new",_token:a("body").data().token},success:function(e){e?(a("#append_new").append(e),o+=10,setTimeout(function(){t=!1},3e3)):l=!0}}),t=!0)),a(e).height()-u>50&&(r||i||(a.ajax({url:"/home/index/ajaxarticlelist",type:"post",data:{start:n,type:"hot",_token:a("body").data().token},success:function(e){e?(a("#append_hot").append(e),n+=10,setTimeout(function(){i=!1},3e3)):r=!0}}),i=!0))})}}(),function(){"/home/about/offer"==e.location.pathname&&(a("#main div:first-child").removeClass("container"),a("body").css({marginBottom:a(e).height()-a("#rate").height()+"px"}),a("#main").css({marginLeft:.25*a(e).width()}),a("#sidebar-ul a").click(function(){var e=a(this).attr("href");return a("html,body").animate({scrollTop:a(e).offset().top-55+"px"},500),a(this).addClass("active").parent().siblings().find("a").removeClass("active"),!1}))}(),function(){if(location.href.indexOf("/admin/series")>0){var e=a("#articleMainClassify"),t=a("#articleSubClassify");a("#uploaderArea").dmUploader({url:"/common/file/uploadFile",extraData:{_token:a("input[name='_token']").val(),filePlace:JSON.stringify({module:"Series",folderName:"seriesCover"})},onUploadSuccess:function(e,t){var i=JSON.parse(t);a("#seriesCover").val(t),a("#coverPreview").attr("src",i.file_url)}}),e.prepend('<option value="">主分类</option>').val(0),e.change(function(){var e=a(this).val();0==e?t.empty().parent().hide():(a.ajax({url:"/admin/article/ajaxClassifyList",type:"post",data:{mainId:e,_token:a("input[name='_token']").val()},success:function(e){var a,e=JSON.parse(e);for(var i in e)a+="<option value="+i+">"+e[i]+"</option>";t.empty().append(a)}}),t.parent().show())}),a("#submit").click(function(){var i={_token:a("input[name='_token']").val(),series_name:a("#seriesName").val(),series_alias:a("#seriesAlias").val(),series_cover:a("#seriesCover").val(),series_main_classify:e.val(),series_sub_classify:t.val()},o="/admin/series";return location.href.indexOf("edit")>0&&(i._method="patch",i.series_id=a("#legend").data().src,o=location.href.slice(0,-5)),a.ajax({url:o,type:"post",data:i,success:function(e){1==e&&(location.href="/admin/series")}}),!1})}}()})}(window,jQuery);