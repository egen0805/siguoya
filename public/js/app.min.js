!function(i,t){t(function(){!function(){if(i.$document=t(document),i.$window=t(i),i.yfx=function(){console.log(arg)},location.href.indexOf("admin")<0){var a=document.createElement("script");a.src="//hm.baidu.com/hm.js?dbc825061da32f4cf32e3c7c56e95034";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o)}}(),function(){function a(){t(l.get(r)).trigger("click"),r++,r>=n&&(r=0)}var o,e=t(".nav-tabs"),n=e.find("a").length,l=e.find("a"),r=1;o=setInterval(a,3e3),t(".tab-pane").hover(function(){clearInterval(o)},function(){o=setInterval(a,3e3)}),t(".redirectLessons").click(function(){i.location.href="/home/backend/tools/phpstorm/"})}(),function(){if(t("#editormd").length){var i=editormd("editormd",{height:500,path:"/vendor/editor/lib/",emoji:!0,dialogLockScreen:!0,dialogShowMask:!0,dialogDraggable:!1,dialogMaskOpacity:.7,dialogMaskBgColor:"#000",imageUpload:!0,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"/common/file/uploadFile"});t("#uploaderArea").length&&t("#uploaderArea").dmUploader({url:"/common/file/uploadFile",extraData:{_token:t("input[name='_token']").val(),filePlace:JSON.stringify({module:"Article",folderName:"articleCover"})},onUploadSuccess:function(i,t){var o=JSON.parse(t);a.$articleCover.val(t),a.$coverPreview.attr("src",o.file_url)}});var a={$articleTitle:t("#articleTitle"),$mainClassify:t("#articleMainClassify"),$subClassify:t("#articleSubClassify"),$articleCover:t("#articleCover"),$submitButton:t("#submit"),$coverPreview:t("#coverPreview"),$articleSummary:t("#articleSummary"),$articleOriginUrl:t("#articleOriginUrl"),mainClassifyChange:function(){var i=t(this).val();0==i?a.subClassifyInit():(a.subClassifyGetList(i),a.$subClassify.parent().show())},subClassifyGetList:function(i){t.isNumeric(i)&&t.ajax({url:"/admin/article/ajaxClassifyList",type:"post",data:{mainId:i,_token:t("input[name='_token']").val()},success:function(i){var t,i=JSON.parse(i);for(var o in i)t+="<option value="+o+">"+i[o]+"</option>";a.$subClassify.empty().append(t)}})},mainClassifyInit:function(){this.$mainClassify.prepend('<option value="">主分类</option>').val(0),this.$mainClassify.change(this.mainClassifyChange)},subClassifyInit:function(){this.$subClassify.empty().parent().hide()},submitFunc:function(i){this.validClassify.call(this),i.call(this)},validClassify:function(){return a.$articleTitle.val()&&a.$mainClassify.val()&&a.$articleCover.val()&&a.$articleCover.val()&&a.$articleSummary.val()&&i.getMarkdown()?!0:!1},init:function(){this.mainClassifyInit(),this.subClassifyInit(),this.$submitButton.click(function(){if(a.validClassify()){var o={_token:t("input[name='_token']").val(),article_title:a.$articleTitle.val(),article_main_classify:a.$mainClassify.val(),article_sub_classify:a.$subClassify.val(),article_cover:a.$articleCover.val(),article_summary:a.$articleSummary.val(),article_content:i.getMarkdown(),article_tags:t("#articleTags").val(),article_keywords:t("#articleKeywords").val(),article_origin_url:function(){return JSON.stringify(a.$articleOriginUrl.val().split(","))}};location.href.indexOf("edit")>0&&(o._method="patch",o.article_id=t("#legend").data().src),t.ajax({url:"/admin/article/store",type:"post",data:o,success:function(i){1==i&&(alert("成功"),location.href="/admin/article/create")}})}else alert("标题,分类,配图,内容都不得为空");return!1})}};a.init()}if(t("#mdContainer").length){editormd.markdownToHTML("markdown",{markdown:t("#mdContainer").val(),markdownSourceCode:!0});var o=t("#articleOriginSource");if(o.length)try{var e=JSON.parse(o.text());t("#articleOriginSource").text("作者:"+e[0]+"\r\n 原文链接:"+e[1]).attr("href",e[1])}catch(n){console.log("Bug:JSON字符串解析出错")}}}(),function(){i.global={$loading:t(".common_loading"),$modalTitle:t("#modalTitle"),$modalContent:t("#modalContent"),$modalCancelButton:t("#modalCancelButton"),$modalOkButton:t("#modalOkButton"),$dialogButton:t("#dialogButton"),$dialogClose:t("#modalClose"),dialogOpen:function(a,o){var e=t.extend({title:"标题",content:"内容",showOk:!1,showCancel:!1,okFunc:null,cancelFunc:null,redirectUrl:""},a);global.$modalTitle.html(e.title),global.$modalContent.html(e.content),e.showCancel?global.$modalCancelButton.show():!0,e.showOk?global.$modalOkButton.show():!0,e.okFunc&&(global.$modalOkButton.unbind("click"),global.$modalOkButton.click(function(){e.okFunc.call(o)})),global.$dialogButton.trigger("click"),e.redirectUrl&&setTimeout(function(){i.location.href=e.redirectUrl},2500)},dialogClose:function(i){var i=i?i:0;setTimeout(function(){global.$dialogClose.trigger("click")},i)},dialogDestroy:function(){global.dialogClose(),global.$modalCancelButton.unbind("click").hide(),global.$modalOkButton.unbind("click"),global.$modalOkButton.click(function(){global.dialogClose()})},isLogin:function(){return t.cookie("user_info")?!0:!1},userInfo:function(){if(!global.isLogin())return null;var i={},a=JSON.parse(t.cookie("user_info"));if(i.userId=a.user_id,i.userName=a.user_name,a.user_face){JSON.parse(a.user_face)}return i},codeCheckBootstrap:function(){var i=document.createElement("script");i.onload=function(){bootlint.showLintReportForCurrentDocument([])},document.body.appendChild(i)},loadingShow:function(i){i.find(".common_loading").length||global.$loading.clone().appendTo(i),i.find(".common_loading").show()},loadingHidden:function(i){i.find(".common_loading").hide()},loadingComplete:function(i){i.find(".common_loading").html('<div class="well">没有更多的数据了, o(︶︿︶)o</div>').show()},errorReport:function(i){global.dialogDestroy(),setTimeout(function(){global.dialogOpen({title:"错误提示",content:i+",请联系客服QQ:924714558",showCancel:!0})},1e3)}}}(),"/home/about/offer"==i.location.pathname&&!function(){t("#main div:first-child").removeClass("container"),t("body").css({marginBottom:t(i).height()-t("#rate").height()+"px"}),t("#main").css({marginLeft:.25*t(i).width()}),t("#sidebar-ul a").click(function(){var i=t(this).attr("href");return t("html,body").animate({scrollTop:t(i).offset().top-55+"px"},500),!1})}()})}(window,jQuery);